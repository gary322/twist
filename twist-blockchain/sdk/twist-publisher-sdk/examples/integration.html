<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TWIST PSAB Integration Example</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      color: #333;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    h1, h2 {
      color: #8B5CF6;
    }
    
    .section {
      background: #f5f5f5;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
    }
    
    .code-block {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 15px;
      border-radius: 6px;
      overflow-x: auto;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 14px;
    }
    
    .button {
      background: #8B5CF6;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      margin: 5px;
    }
    
    .button:hover {
      background: #7C3AED;
    }
    
    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }
    
    .stat-card {
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .stat-label {
      font-size: 14px;
      color: #666;
    }
    
    .stat-value {
      font-size: 24px;
      font-weight: bold;
      color: #8B5CF6;
    }
  </style>
</head>
<body>
  <h1>ðŸ”¥ TWIST Page-Staked Attention Bonds (PSAB)</h1>
  <p>Integration example for website publishers</p>

  <div class="section">
    <h2>Quick Integration</h2>
    <p>Add this code to your website to enable PSAB staking:</p>
    
    <pre class="code-block">&lt;!-- TWIST PSAB Widget --&gt;
&lt;script&gt;
  (function() {
    const script = document.createElement('script');
    script.src = 'https://unpkg.com/@twist-protocol/publisher-sdk@latest/dist/widget.js';
    script.async = true;
    script.onload = function() {
      window.psabWidget = new PSABWidget({
        websiteUrl: 'https://yourwebsite.com',
        sector: 'Gaming', // Gaming, DeFi, NFT, Social, Other
        widgetPosition: 'bottom-right',
        theme: 'default',
        analytics: true
      });
      window.psabWidget.mount();
    };
    document.head.appendChild(script);
  })();
&lt;/script&gt;</pre>
  </div>

  <div class="section">
    <h2>Widget Controls</h2>
    <p>Test the widget functionality:</p>
    
    <button class="button" onclick="showWidget()">Show Widget</button>
    <button class="button" onclick="hideWidget()">Hide Widget</button>
    <button class="button" onclick="toggleWidget()">Toggle Widget</button>
    
    <h3>Theme Options:</h3>
    <button class="button" onclick="changeTheme('default')">Default Theme</button>
    <button class="button" onclick="changeTheme('dark')">Dark Theme</button>
    <button class="button" onclick="changeTheme('minimal')">Minimal Theme</button>
    
    <h3>Position Options:</h3>
    <button class="button" onclick="changePosition('bottom-right')">Bottom Right</button>
    <button class="button" onclick="changePosition('bottom-left')">Bottom Left</button>
    <button class="button" onclick="changePosition('top-right')">Top Right</button>
    <button class="button" onclick="changePosition('top-left')">Top Left</button>
  </div>

  <div class="section">
    <h2>Live Analytics Dashboard</h2>
    <div class="stats">
      <div class="stat-card">
        <div class="stat-label">Total Staked</div>
        <div class="stat-value" id="totalStaked">0 TWIST</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Current APY</div>
        <div class="stat-value" id="currentAPY">0%</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Active Stakers</div>
        <div class="stat-value" id="stakerCount">0</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Daily Burns</div>
        <div class="stat-value" id="dailyBurns">0 TWIST</div>
      </div>
    </div>
  </div>

  <div class="section">
    <h2>Advanced Integration</h2>
    <p>For more control, use the SDK programmatically:</p>
    
    <pre class="code-block">import { PSABClient, PSABWidget } from '@twist-protocol/publisher-sdk';

// Initialize client
const client = new PSABClient({
  websiteUrl: 'https://yourwebsite.com',
  sector: 'Gaming',
  rpcEndpoint: 'https://api.mainnet-beta.solana.com'
});

// Get pool info
const poolInfo = await client.getBondPoolInfo();
console.log('Pool TVL:', poolInfo.totalStaked);

// Get staker position
const position = await client.getStakerPosition(wallet.publicKey);
console.log('Your stake:', position?.amountStaked);

// Create stake instruction
const stakeIx = await client.createStakeInstruction(
  wallet.publicKey,
  BigInt(1000 * 10**9) // 1000 TWIST
);

// Create burn instruction (for visitors)
const burnIx = await client.createBurnInstruction(
  wallet.publicKey,
  BigInt(10 * 10**9) // 10 TWIST
);</pre>
  </div>

  <div class="section">
    <h2>How PSAB Works</h2>
    <ol>
      <li><strong>Website Integration:</strong> Publishers add the PSAB widget to their site</li>
      <li><strong>User Staking:</strong> Users lock TWIST tokens for minimum 30 days</li>
      <li><strong>Visitor Burns:</strong> Website visitors burn TWIST while browsing</li>
      <li><strong>90/10 Split:</strong> 90% permanently burned, 10% to stakers</li>
      <li><strong>Yield Distribution:</strong> Stakers earn proportional to their share</li>
    </ol>
    
    <h3>Benefits for Publishers:</h3>
    <ul>
      <li>âœ… Build engaged community of stakeholders</li>
      <li>âœ… Earn revenue from staking pool fees</li>
      <li>âœ… Access detailed analytics</li>
      <li>âœ… Increase visitor retention</li>
    </ul>
    
    <h3>Benefits for Stakers:</h3>
    <ul>
      <li>âœ… Earn yields from visitor activity</li>
      <li>âœ… Support favorite websites</li>
      <li>âœ… Deflationary tokenomics (90% burn)</li>
      <li>âœ… NFT receipts for positions</li>
    </ul>
  </div>

  <!-- Mock PSAB Widget Implementation -->
  <script>
    // Mock widget for demo
    class MockPSABWidget {
      constructor(config) {
        this.config = config;
        this.isVisible = false;
        console.log('PSAB Widget initialized:', config);
      }
      
      mount() {
        console.log('Widget mounted');
        this.createMockWidget();
        this.updateMockStats();
      }
      
      createMockWidget() {
        const widget = document.createElement('div');
        widget.id = 'mock-psab-widget';
        widget.style.cssText = `
          position: fixed;
          ${this.getPositionStyles()}
          width: 360px;
          background: #8B5CF6;
          color: white;
          padding: 20px;
          border-radius: 8px;
          box-shadow: 0 4px 6px rgba(0,0,0,0.1);
          z-index: 9999;
          display: none;
        `;
        
        widget.innerHTML = `
          <h3 style="margin: 0 0 15px 0;">Stake on Example.com</h3>
          <p>ðŸ”¥ 90% of burns go to reducing supply</p>
          <p>ðŸ’° 10% distributed to stakers</p>
          <button style="
            background: white;
            color: #8B5CF6;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
            margin-top: 15px;
          ">Connect Wallet to Stake</button>
        `;
        
        document.body.appendChild(widget);
        this.widget = widget;
      }
      
      getPositionStyles() {
        const positions = {
          'bottom-right': 'bottom: 20px; right: 20px;',
          'bottom-left': 'bottom: 20px; left: 20px;',
          'top-right': 'top: 20px; right: 20px;',
          'top-left': 'top: 20px; left: 20px;'
        };
        return positions[this.config.widgetPosition] || positions['bottom-right'];
      }
      
      show() {
        if (this.widget) {
          this.widget.style.display = 'block';
          this.isVisible = true;
        }
      }
      
      hide() {
        if (this.widget) {
          this.widget.style.display = 'none';
          this.isVisible = false;
        }
      }
      
      toggle() {
        if (this.isVisible) {
          this.hide();
        } else {
          this.show();
        }
      }
      
      updateMockStats() {
        // Simulate live stats
        setInterval(() => {
          const totalStaked = Math.floor(Math.random() * 1000000) + 500000;
          const apy = (Math.random() * 500 + 100).toFixed(2);
          const stakers = Math.floor(Math.random() * 1000) + 100;
          const dailyBurns = Math.floor(Math.random() * 50000) + 10000;
          
          document.getElementById('totalStaked').textContent = `${(totalStaked / 1000).toFixed(0)}K TWIST`;
          document.getElementById('currentAPY').textContent = `${apy}%`;
          document.getElementById('stakerCount').textContent = stakers;
          document.getElementById('dailyBurns').textContent = `${(dailyBurns / 1000).toFixed(0)}K TWIST`;
        }, 3000);
      }
    }
    
    // Initialize mock widget
    window.psabWidget = new MockPSABWidget({
      websiteUrl: 'https://example.com',
      sector: 'Gaming',
      widgetPosition: 'bottom-right',
      theme: 'default',
      analytics: true
    });
    
    window.psabWidget.mount();
    
    // Control functions
    function showWidget() {
      window.psabWidget.show();
    }
    
    function hideWidget() {
      window.psabWidget.hide();
    }
    
    function toggleWidget() {
      window.psabWidget.toggle();
    }
    
    function changeTheme(theme) {
      console.log('Theme changed to:', theme);
      // In real implementation, this would update widget styles
    }
    
    function changePosition(position) {
      console.log('Position changed to:', position);
      // In real implementation, this would reposition widget
    }
  </script>
</body>
</html>